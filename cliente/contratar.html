<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmação de Serviço - Clínica Estética</title>
    <link rel="stylesheet" href="assets/CSS/contratar.css">
</head>

<body>
    <header class="svg-container">
        <svg viewBox="0 0 1920 253" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M-9.1543 -26.665L1920.54 -84.5264L1927.89 160.53C1139.74 334.345 1257.51 12.7409 -0.784692 252.463L-9.1543 -26.665Z" fill="#F8C5D3" fill-opacity="0.79"/>
        </svg>
        <svg viewBox="0 0 1920 219" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 0H1920V187C1131.33 301.5 1258 59 0 213V0Z" fill="#F6D8E0" fill-opacity="0.7"/>
        </svg>

        <section class="nav-container">    
            <div class="logo">Divine Care</div>
            <nav>
                <a href="home.html">Home</a>
                <a href="sobre.html">Sobre</a>
                <a href="servicos.html">Serviços</a>
            </nav>
        </section> 
    </header>

    <main>
        <section class="confirmacao">
            <h1>Confirmação de Serviço</h1>
            <p>Seu serviço foi confirmado com sucesso!</p>
            <div class="detalhes-servico">
                <h2>Detalhes do Serviço</h2>
                <p><strong>Serviço: </strong></p>
                <p><strong>Data: </strong></p>
                <p><strong>Horário: </strong></p>
                <p><strong>Profissional: </strong></p>
            </div>
            <div class="interativo">
                <a href="servicos.html" class="btn">Voltar aos Serviços</a>
                <a href="pagamento.php" class="btn pagar">Realizar pagamento<a>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div>
                <p> (21) XXXX-XXXX </p>
                <p> @clinica.estetica </p>
            </div>
            <div>
                <p>Funcionamento: Seg - Sáb: 07h - 22h</p>
                <p>Aceitamos:</p>
                <img src="assets/images/visa.png" alt="Visa">
                <img src="assets/images/master.png" alt="Mastercard">
            </div>
        </div>
    </footer>
/*/
    <script>
    function contratar(id) {
    // Verifique se o localStorage está disponível
    if (typeof(Storage) !== "undefined") {
        localStorage.setItem('idServico', id); // Salvar o ID do serviço no localStorage
        window.location.href = 'contratar.html'; // Redirecionar para a página contratar.html
    } else {
        alert("Seu navegador não suporta armazenamento local. Atualize-o!");
    }
    }

    // Obtém o ID do serviço do localStorage
    const idServico = localStorage.getItem("idServico");

    if (!idServico) {
        alert("Nenhum serviço selecionado. Retorne à página inicial.");
    } else {
        // Faz a requisição ao PHP
        fetch(`http://localhost/3DAW-Clinica-de-Estetica/cliente/src/php/getServico.php?idServico=${idServico}`)
            .then(response => {
                console.log("Status da resposta:", response.status); // Para depuração
                if (!response.ok) {
                    throw new Error("Erro ao conectar com o servidor. Status: " + response.status);
                }
                return response.json();
            })
            .then(data => {
                console.log("Dados recebidos:", data); // Para depuração
                if (data.error) {
                    alert(data.error); // Exibe o erro retornado pelo servidor
                } else {
                    // Atualiza o conteúdo da página com os dados do serviço
                    const detalhesServico = document.querySelector('.detalhes-servico');
                    detalhesServico.innerHTML = `
                        <h2>Detalhes do Serviço</h2>
                        <p><strong>Serviço:</strong> ${data.tipo}</p>
                        <p><strong>Descrição:</strong> ${data.descricao}</p>
                        <p><strong>Profissional:</strong> ${data.nomeFuncionario}</p>
                        <p><strong>Preço:</strong> R$ ${data.preco.toFixed(2)}</p>
                    `;
                }
            })
            .catch(error => {
                console.error("Erro ao buscar os dados do serviço:", error);
                alert("Houve um problema ao carregar os dados do serviço.");
            });
    }
    </script>
/*/
    
</body>
</html>
